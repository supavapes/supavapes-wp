jQuery(document).ready(function(d){"use strict";var s,l=[],r=[];function e(){var a=0;d(".variant-qty-input").each(function(){var t=d(this);0<parseInt(t.val())&&a++}),0<a&&p()}function o(t){var a=t,e=parseInt(a.data("variation-id")),o=parseInt(a.data("stock-quantity")),i=a.data("backorders"),n=a.data("manage-stock"),c=parseInt(a.val()),s=a.data("variable-name");0<c?u(l,e,c,s,o,i,n,r):0!==c&&!isNaN(c)&&void 0!==c||(r.filter(function(t,a){t.vid===e&&r.splice(a,1)}),l.filter(function(t,a){t.vid===e&&l.splice(a,1)})),0<r.length&&p()}function p(){d(".vpe_single_add_to_cart_button").removeAttr("disabled")}function u(e,o,t,a,i,n,c,s){var r={};r.vid=o,r.qty=t,r.variant_name=a,r.stock_quantity=i,"yes"===c?"no"===n&&(r.is_valid=i<t?"No":"Yes"):r.is_valid="Yes",e.filter(function(t,a){t.vid===o&&e.splice(a,1)}),e.push(r),s.filter(function(t,a){t.vid===o&&s.splice(a,1)}),s.push(r)}function i(){d(".error-message-blk").hide()}function m(t,a,e){var o={action:t,variations:e,parent_product_id:a};d.ajax({type:"POST",url:WQCMVPublicJSObj.ajaxurl,data:o,success:function(t){"vpe-product-added-to-cart-prac"===t.data.message&&(d(".vpe_container_btn").css("display","inline-block"),d(document.body).trigger("wc_fragment_refresh"),d(".vpe-ajax-loader-message").text("Updating the buffer stock as items have been added to cart now..."),setTimeout(function(){d("table.vpe_table tr td.vpe-qty-td input").each(function(){var t,a,e=d(this),o=e.data("stock-quantity"),i=e.data("variation-id");e.data("backorders");""!==o&&0!==(t=l.filter(function(t){return t.vid===parseInt(i)})).length&&(a=o-t[0].qty,e.data("stock-quantity",a),0<a&&e.attr({max:a,"data-stock-quantity":a}))}),d("table.vpe_table tr td.vpe-stock-td").each(function(){var t,a=d(this),e=a.attr("class"),o=a.attr("id").replace(e+"-",""),i=d("#vpe-qty-td-"+o+" input"),n=parseInt(i.data("stock-quantity")),c=i.data("manage-stock"),s=i.data("backorders"),r="";0!==l.filter(function(t){return parseInt(t.vid)===parseInt(o)}).length&&"yes"===c&&"no"===s&&(a.text(""),0===n?(d("#vpe-qty-td-"+o).text(""),d("<div />",{class:"out_stock_qty",text:"N/A"}).appendTo("#vpe-qty-td-"+o),r="Already in Cart",d("<i />",{class:"icon-smile"}).appendTo(a),d("<span />",{class:"status",text:r}).appendTo(a)):0<=n&&(d("<i/>",{class:"icon-smile"}).appendTo(a),t=d("<span/>",{class:"status",text:"In Stock"}),d("<span/>",{class:"vpe_small_stock",text:"( "+n+" Available )"}).appendTo(t),t.appendTo(a)))}),"yes"===t.data.redirect_to_cart?window.location.replace(t.data.cart_url):d(".vpe-ajax-loader").css("display","none"),d(".vpe-view-cart").css("display","inline-block"),d(".vpe_container_btn").after('<p class="success-message" style="color:green">Variations added successfully</p>'),d(".variant-qty-input").val(0),r=[],d(".success-message").fadeOut(3e3)},1e3))}})}function t(t){var a,e,o=t.data("variation-id"),i=d("#wqcmv-manage-outofstock-products-modal .wqcmv-modal-container");d("#wqcmv-manage-outofstock-products-modal").addClass("notify-me"),d("#wqcmv-manage-outofstock-products-modal").show(),i.text(""),i.addClass("wqcmv-modal-loading"),d("<img/>",{src:WQCMVPublicJSObj.loader_url,alt:"Loader"}).appendTo(i),d("<p/>",{text:WQCMVPublicJSObj.wait_msg}).appendTo(i),e={action:"wqcmv_get_user_email_for_notify_user",variation_id:o},d.ajax({dataType:"JSON",url:WQCMVPublicJSObj.ajaxurl,type:"POST",data:e,success:function(t){i.removeClass("wqcmv-modal-loading"),"wqcmv-modal-opened-for-notify-user"===t.data.message&&(d(".wqcmv-modal-title").text(t.data.modal_title),a=d("<div/>",{class:"wqcmv-modal-container",html:t.data.html}),i.replaceWith(a))}})}d(document).on("change",".variant-qty-input",function(t){o(d(this)),i(),e()}),d(document).on("keyup",".variant-qty-input",function(t){var a;a=d(this),!0===function(t){var a,e,o,i=[];for(a=48,e=96;e<106;a++,e++)i.push(a,e);return i.push(38,e),i.push(40,e),o=function(t){return t.keyCode||t.which}(t),-1!==d.inArray(o,i)}(t)&&(o(a),i()),e()}),d(document).on("keyup",".test-qty",function(t){var a=d(this).val();a=a.replace(/([A-Za-z,.â‚¬@#])+/g,""),d(this).val(a)}),d(document).on("click",".vpe_single_add_to_cart_button",function(t){var a,e,o=function(t,e){var a,o,i;if(0<t.length||0<e.length)for(a in t)o=t[a],i=o.vid,e.filter(function(t,a){t.vid===parseInt(i)&&e.splice(a,1)}),e.push(o);return e}(r,l),i=!1,n=!1,c=d(this).parents().siblings(".error-message-blk");t.preventDefault(),c.text(""),a=d("<ul/>"),(0===r.length||r.length<1)&&(n=i=!0,d("<li/>",{class:"warning-message",style:"color:red",text:"Please select at least one quantity for any variation"}).appendTo(a)),!0!==n&&d.each(o,function(){"No"===this.is_valid&&(i=!0,d("<li/>",{class:"warning-message",style:"color:red",text:"You cannot add that amount of "+this.variant_name+" to the cart because there is not enough stock ("+this.stock_quantity+" remaining)"}).appendTo(a))}),!0===i?(a.appendTo(c),c.show(),!0===n&&s(jQuery(this))):(e=d("#vpe-parent-product-id").val(),d(".vpe-ajax-loader-message").text("Adding variants to cart..."),d(".vpe-ajax-loader").css("display","block"),m("wqcmv_woocommerce_ajax_add_to_cart",e,o))}),s=function(t){void 0!==t&&t.parent().parent().find("input[name=qty]").filter(":input:visible:first").focus()},d(document).on("click",".products-pagination",function(){var t,a,e=d(this),o=d(e).siblings("#vpe-active-chunk").val(),i=d(e).siblings("#vpe-active-chunk").val(),n=parseInt(o),c=parseInt(i);if(e.hasClass("next")&&(t=n+1),e.hasClass("prev")&&(t=n-1),t<0)return d(e).parent(".pagination-for-products").find(".prev").prop("disabled",!0),d("html,body").animate({scrollTop:d(".vpe_table_responsive").offset().top-90},1e3),!1;0<=t&&(d(e).parent(".pagination-for-products").find(".prev").prop("disabled",!1),d("html,body").animate({scrollTop:d(".vpe_table_responsive").offset().top-90},1e3)),a={action:"wqcmv_products_pagination",loadchunk:t,parent_product_id:d("#vpe-parent-product-id").val(),changed_variations:r},function(t){d(t).parent().siblings(".vpe-ajax-loader").show(),d(t).parent().siblings(".vpe-ajax-loader").find(".vpe-ajax-loader-message").text("Loading Variants....")}(e),d("html,body").animate({scrollTop:d(".vpe_table_responsive").offset().top-90},1e3),d.ajax({dataType:"JSON",url:WQCMVPublicJSObj.ajaxurl,type:"POST",data:a,success:function(t){"vpe-product-pagination"===t.data.message&&(function(t){d(t).parent().siblings(".vpe-ajax-loader").hide()}(e),"no"===t.data.next_chunk_available?d(e).parent(".pagination-for-products").find(".next").prop("disabled",!0):"yes"===t.data.next_chunk_available&&(d(e).parent(".pagination-for-products").find(".next").prop("disabled",!1),d(e).parent(".pagination-for-products").find(".prev").prop("disabled",!1)),"no"===t.data.prev_chunk_available&&d(e).parent(".pagination-for-products").find(".prev").prop("disabled",!0),""!==t.data.html&&(function(t,a){var e,o=d(t).parent().parent().find(".vpe_table_responsive .vpe_table .pagination_row");e=d("<tbody/>",{class:"pagination_row",html:a}),o.replaceWith(e)}(e,t.data.html),e.hasClass("next")&&(d(e).siblings("#vpe-next-chunk").val(c+1),d(e).siblings("#vpe-active-chunk").val(n+1)),e.hasClass("prev")&&(d(e).siblings("#vpe-next-chunk").val(c-1),d(e).siblings("#vpe-active-chunk").val(n-1))))}})}),d(document).on("click",".variation-image-id",function(){var t=d(this).data("imageurl");d.fancybox.open(t)}),d(document).on("click","#vpe-contact-admin",function(){var a,t,e=d(this).data("product-id"),o=d("#wqcmv-manage-outofstock-products-modal .wqcmv-modal-container");o.text(""),o.addClass("wqcmv-modal-loading"),d("#wqcmv-manage-outofstock-products-modal").show(),d("<img/>",{src:WQCMVPublicJSObj.loader_url,alt:"Loader"}).appendTo(o),d("<p/>",{text:WQCMVPublicJSObj.fetch_products_wait_msg}).appendTo(o),t={action:"wqcmv_get_out_of_stock_products",product_id:e},d.ajax({dataType:"JSON",url:WQCMVPublicJSObj.ajaxurl,type:"POST",data:t,success:function(t){o.removeClass("wqcmv-modal-loading"),"wqcmv-out-of-stock-products-fetched"===t.data.message&&(d(".wqcmv-modal-title").text(t.data.modal_title),a=d("<div/>",{class:"wqcmv-modal-container",html:t.data.html}),o.replaceWith(a))}})}),d(document).on("click",".wqcmv-modal-container .modal-pagination",function(){var e,o,t,a=d(this),i=a.siblings("#modal-pagination-chunk"),n=parseInt(i.val()),c=parseInt(i.data("product-id")),s=d(".wqcmv_product_table #the-list");a.hasClass("next")?(n+=1,o=(e=a).siblings(".prev")):a.hasClass("prev")&&(n-=1,e=(o=a).siblings(".next")),t={action:"wqcmv_modal_pagination_outofstock_products",product_id:c,loadchunk:n},d.ajax({dataType:"JSON",url:WQCMVPublicJSObj.ajaxurl,type:"POST",data:t,beforeSend:function(t){s.css("opacity","0.6")},success:function(t){var a;"modal-product-pagination"===t.data.message&&("no"===t.data.next_chunk_available?e.prop("disabled",!0):e.prop("disabled",!1),"no"===t.data.prev_chunk_available?o.prop("disabled",!0):o.prop("disabled",!1),""!==t.data.loadchunk&&i.val(t.data.loadchunk),""!==t.data.html&&(s.text(""),a=d("<tbody />",{class:"wqcmv-recommended-prod-list",id:"the-list",html:t.data.html}),d("#wqcmv-select-all-checkbox").prop("checked",!1),s.replaceWith(a)))}})}),d(document).on("click",".wqcmv-return-to-form",function(){t(d("#notify_me"))}),d(document).on("click","#notify_me",function(){t(d(this))}),d(document).on("click",".wqcmv-notify-for-outofstock",function(){var t,e=d(".wqcmv-modal-container"),a=d(".wqcmv_product_form").data("variation-id"),o=d("#wqcmv_user_email").val(),i="",n="",c={};return d("#create_account").prop("checked")&&(i="yes"),""===o?(d(".notification_popup.error").fadeIn(1e3),d(".notification_popup.error").addClass("active"),d(".notification_message .title").html("Please enter email."),d(".notification_popup.error").fadeOut(3e3),!1):/^([a-zA-Z0-9_.])+@(([a-zA-Z_.])+\.)+([a-zA-Z_.]{2,4})+$/.test(o)?void((n=!0)===n&&(d(".wqcmv-notify-me-form-fields input").each(function(){c[d(this).attr("name")]=d(this).val()}),t={action:"wqcmv_notification_request",variation_id:a,email:o,create_account:i},d.ajax({dataType:"JSON",url:WQCMVPublicJSObj.ajaxurl,type:"POST",data:t,success:function(t){var a;return"error"===t.data.errormsg?(a=d("<div/>",{class:"wqcmv-modal-container",html:t.data.errorhtml}),e.replaceWith(a),!1):"success"===t.data.sucessmsg?(a=d("<div/>",{class:"wqcmv-modal-container",html:t.data.successhtml}),e.replaceWith(a),d(".modal-for-notify").fadeOut(2e3),!1):void("wqcmv-modal-opened-for-notify-user"===t.data.message&&(a=d("<div/>",{class:"wqcmv-modal-container",html:t.data.html}),e.replaceWith(a)))}}))):(d(".notification_popup.error").fadeIn(1e3),d(".notification_popup.error").addClass("active"),d(".notification_message .title").html("Please enter valid email."),d(".notification_popup.error").fadeOut(3e3),!1)}),d(document).on("click",".notification_close",function(){d(".notification_popup").removeClass("active success")}),d(document).on("click","#wqcmv-select-all-checkbox",function(){!0===d(this).prop("checked")?d(".wqcmv-out-of-stock-prods").each(function(){d(this).attr("checked","checked")}):!1===d(this).prop("checked")&&d(".wqcmv-out-of-stock-prods").each(function(){d(this).removeAttr("checked")})}),d(document).on("click",".wqcmv-out-of-stock-prods",function(){d(".wqcmv-out-of-stock-prods:checked").length===d(".wqcmv-out-of-stock-prods").length?d("#wqcmv-select-all-checkbox").attr("checked","checked"):d("#wqcmv-select-all-checkbox").removeAttr("checked")}),d(document).on("click",".wqcmv-send-notofication-to-admin",function(){var e,a,t,o=d("input[name=wqcmv_name]").val(),i=d("input[name=wqcmv_email]").val(),n=d("textarea[name=wqcmv_message]").val(),c=[],s="",r="";return d(".wqcmv-out-of-stock-prods").each(function(){var t={};!0===d(this).prop("checked")&&(e=d(this).val(),(""===(a=parseInt(d(".wqcmv-prod-qty-"+e).val()))||0===a||a<0||void 0===a||isNaN(a))&&(a=1),t.id=e,t.qty=a,c.filter(function(t,a){t.id===e&&c.splice(a,1)}),c.push(t))}),""===i&&""===o&&0===c.length?(d(".notification_popup.error").fadeIn(1e3),d(".notification_popup.error").addClass("active"),d(".notification_message .title").html("Please enter name.<br>Please enter email.<br>Please select variation"),d(".notification_popup.error").fadeOut(3e3),!1):""===i&&""===o?(d(".notification_popup.error").fadeIn(1e3),d(".notification_popup.error").addClass("active"),d(".notification_message .title").html("Please enter name.<br> Please enter email"),d(".notification_popup.error").fadeOut(3e3),!1):""===o?(d(".notification_popup.error").fadeIn(1e3),d(".notification_popup.error").addClass("active"),d(".notification_message .title").html("Please enter name"),d(".notification_popup,error").fadeOut(3e3),!1):""===i?(d(".notification_popup.error").fadeIn(1e3),d(".notification_popup.error").addClass("active"),d(".notification_message .title").html("Please enter email"),d(".notification_popup.error").fadeOut(3e3),!1):o.match(/^([a-zA-Z]{2,16})$/)?(r=!0,/^([a-zA-Z0-9_.])+@(([a-zA-Z_.])+\.)+([a-zA-Z_.]{2,4})+$/.test(i)?(s=!0,0===c.length||!0!==s||!0!==r?(d(".notification_popup.error").fadeIn(1e3),d(".notification_popup.error").addClass("active"),d(".notification_message .title").html("Please select variation."),d(".notification_popup.error").fadeOut(3e3),!1):(t={action:"wqcmv_send_notification_to_admin",items:c,name:o,email:i,user_message:n},d(".wqcmv-send-notofication-to-admin").text("Submitting..."),void d.ajax({dataType:"JSON",url:WQCMVPublicJSObj.ajaxurl,type:"POST",data:t,success:function(t){"wqcmv-notification-sent"===t.data.message&&(d(".wqcmv-send-notofication-to-admin").text("Submit"),d(".notification_popup.success").fadeIn(1e3),d(".notification_popup.success").addClass("active"),d(".notification_message .title").html("Request sent successfully"),d(".notification_popup.success").fadeOut(3e3),d("#wqcmv-manage-outofstock-products-modal").fadeOut(2e3))}}))):(d(".notification_popup.error").fadeIn(1e3),d(".notification_popup.error").addClass("active"),d(".notification_message .title").html("Please enter valid email."),d(".notification_popup.error").fadeOut(3e3),!1)):(d(".notification_popup.error").fadeIn(1e3),d(".notification_popup.error").addClass("active"),d(".notification_message .title").html("Please enter valid name."),d(".notification_popup.error").fadeOut(3e3),!1)}),d(document).on("click",".close",function(){d("#wqcmv-manage-outofstock-products-modal").removeClass("notify-me"),d("#wqcmv-manage-outofstock-products-modal").hide(),d("body").removeClass("modal-active")})});var tableMobile=function(){var t=jQuery(".vpe_table_responsive").innerWidth();parseInt(t)<440?jQuery(".vpe_table_responsive table").addClass("table_mobile"):jQuery(".vpe_table_responsive table").removeClass("table_mobile")};tableMobile(),jQuery(window).resize(function(){tableMobile()});