<?php 
/**
 * Template to show blog listig.
 * 
 */
?>
<div class="sv-blog-page-main">
	<div class="sv-blog-page-content">
		<div class="sv-blog-search-filter-wrap">
			<div class="sv-blog-search">
                <input type="text" placeholder="Search Blog" id="search-blog">
            </div>
			<select class="categories-select" id="category-filter">
				<option value="">Select Category</option>
				<?php
				$exclude_category_id = 1;
				$categories = get_terms(array(
					'taxonomy' => 'category',
					'hide_empty' => false, 
					'exclude' => $exclude_category_id,

				));
				if ( !empty($categories) && !is_wp_error($categories) ) {
					foreach ( $categories as $category ) {
						echo '<option value="' . esc_attr($category->term_id) . '">' . esc_html($category->name) . '</option>';
					}
				}
				?>
			</select>
		</div>
		<?php
		$paged_var = get_query_var('paged') ? get_query_var('paged') : 1;
		$args = array(
			'post_type' => 'post',
			'posts_per_page' => 10,
			'paged' => $paged_var
		);
		$the_query = new WP_Query( $args );
		if ( $the_query->have_posts() ) {
			echo '<div class="sv-blog-listing">';
			while ( $the_query->have_posts() ) {
				$the_query->the_post();
				$author_id = get_the_author_meta('ID');
				$author_name = get_the_author();
				$published_date = get_the_date();
				$post_content = get_the_content();
				$view_count = getPostViews(get_the_ID());
				$comment_count = get_comments_number(get_the_ID());
				?>
				<div class="sv-blog">
					<a href="<?php the_permalink(); ?>" class="sv-blog-img">
						<?php if (has_post_thumbnail()) : ?>
							<img src="<?php the_post_thumbnail_url('full'); ?>" alt="<?php echo esc_attr(get_the_title(),'hello-elementor-child'); ?>">
						<?php endif; ?>
					</a>
					<div class="sv-blog-content">
						<a href="<?php echo esc_url(get_the_permalink()); ?>" class="sv-blog-title"><?php echo esc_html(get_the_title(),'hello-elementor-child'); ?></a>
						<div class="sv-blog-meta-detail">
							<div class="sv-blog-meta">
								<svg width="15" height="17" viewBox="0 0 15 17" fill="none" xmlns="http://www.w3.org/2000/svg">
										<path d="M7.15861 7.71054C9.25148 7.71054 10.9481 6.01393 10.9481 3.92107C10.9481 1.8282 9.25148 0.131592 7.15861 0.131592C5.06575 0.131592 3.36914 1.8282 3.36914 3.92107C3.36914 6.01393 5.06575 7.71054 7.15861 7.71054Z" fill="#424242"/>
										<path fill-rule="evenodd" clip-rule="evenodd" d="M13.8952 16.1316C14.0068 16.1316 14.1137 16.0873 14.1926 16.0084C14.2715 15.9295 14.3158 15.8225 14.3158 15.711V15.7105C14.3158 13.8121 13.5617 11.9915 12.2193 10.6491C10.8769 9.30675 9.05629 8.55261 7.1579 8.55261C3.20455 8.55261 0 11.7572 0 15.7105V15.711C0 15.8225 0.0443076 15.9295 0.123176 16.0084C0.202043 16.0873 0.309011 16.1316 0.420547 16.1316H13.8952Z" fill="#424242"/>
									</svg>
								<span class="sv-blog-meta-title author"><?php echo esc_html($author_name,'hello-elementor-child'); ?></span>
							</div>
							<div class="sv-blog-meta">
							<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
										<path fill-rule="evenodd" clip-rule="evenodd" d="M13.4406 1.59187V0.525258C13.4364 0.386658 13.3783 0.255164 13.2788 0.158633C13.1792 0.0621017 13.046 0.00811768 12.9073 0.00811768C12.7687 0.00811768 12.6354 0.0621017 12.5359 0.158633C12.4363 0.255164 12.3783 0.386658 12.374 0.525258V1.05848H9.97402C9.90311 1.05848 9.83524 1.08677 9.78522 1.13646C9.73553 1.18648 9.70724 1.25435 9.70724 1.32509V1.59187C9.70297 1.73047 9.64491 1.86196 9.54536 1.95849C9.44582 2.05503 9.3126 2.10901 9.17393 2.10901C9.03526 2.10901 8.90205 2.05503 8.8025 1.95849C8.70295 1.86196 8.64489 1.73047 8.64062 1.59187V0.525258C8.63636 0.386658 8.5783 0.255164 8.47875 0.158633C8.3792 0.0621017 8.24599 0.00811768 8.10732 0.00811768C7.96865 0.00811768 7.83544 0.0621017 7.73589 0.158633C7.63634 0.255164 7.57828 0.386658 7.57401 0.525258V1.05848H5.17401C5.10311 1.05848 5.03524 1.08677 4.98521 1.13646C4.93553 1.18648 4.90724 1.25435 4.90724 1.32509V1.59187C4.90297 1.73047 4.84491 1.86196 4.74536 1.95849C4.64581 2.05503 4.5126 2.10901 4.37393 2.10901C4.23526 2.10901 4.10205 2.05503 4.0025 1.95849C3.90295 1.86196 3.84489 1.73047 3.84063 1.59187V0.525258C3.83636 0.386658 3.7783 0.255164 3.67875 0.158633C3.5792 0.0621017 3.44599 0.00811768 3.30732 0.00811768C3.16865 0.00811768 3.03544 0.0621017 2.93589 0.158633C2.83634 0.255164 2.77828 0.386658 2.77401 0.525258V1.05848H1.97401C1.62038 1.05848 1.28122 1.19896 1.03117 1.44902C0.781107 1.69908 0.640625 2.03823 0.640625 2.39187V14.6585C0.640625 15.0121 0.781107 15.3513 1.03117 15.6013C1.28122 15.8514 1.62038 15.9919 1.97401 15.9919H15.3072C15.6609 15.9919 16 15.8514 16.2501 15.6013C16.5001 15.3513 16.6406 15.0121 16.6406 14.6585V2.39187C16.6406 2.03823 16.5001 1.69908 16.2501 1.44902C16 1.19896 15.6609 1.05848 15.3072 1.05848H14.774C14.7031 1.05848 14.6352 1.08677 14.5852 1.13646C14.5355 1.18648 14.5072 1.25435 14.5072 1.32509V1.59187C14.503 1.73047 14.4449 1.86196 14.3454 1.95849C14.2458 2.05503 14.1126 2.10901 13.9739 2.10901C13.8353 2.10901 13.702 2.05503 13.6025 1.95849C13.5029 1.86196 13.4449 1.73047 13.4406 1.59187ZM15.574 5.32526V14.6585C15.574 14.7294 15.5457 14.7973 15.496 14.8473C15.446 14.897 15.3781 14.9253 15.3074 14.9253H1.97385C1.90294 14.9253 1.83507 14.897 1.78505 14.8473C1.73525 14.7971 1.70723 14.7293 1.70707 14.6586V5.32509L15.574 5.32526ZM10.2406 11.1919C10.2406 11.0504 10.1844 10.9148 10.0843 10.8148C9.98433 10.7147 9.84869 10.6585 9.70724 10.6585H7.57401C7.43256 10.6585 7.29692 10.7147 7.1969 10.8148C7.09688 10.9148 7.04067 11.0504 7.04063 11.1919V13.3253C7.04071 13.4667 7.09694 13.6023 7.19696 13.7023C7.29698 13.8022 7.43259 13.8584 7.57401 13.8585H9.70724C9.84866 13.8584 9.98427 13.8022 10.0843 13.7023C10.1843 13.6023 10.2405 13.4667 10.2406 13.3253V11.1919ZM14.5072 11.1919C14.5072 11.0504 14.451 10.9148 14.351 10.8148C14.251 10.7148 14.1154 10.6586 13.974 10.6585H11.8406C11.6992 10.6585 11.5635 10.7147 11.4635 10.8148C11.3635 10.9148 11.3073 11.0504 11.3072 11.1919V13.3253C11.3073 13.4667 11.3636 13.6023 11.4636 13.7023C11.5636 13.8022 11.6992 13.8584 11.8406 13.8585H13.974C14.1154 13.8584 14.251 13.8022 14.351 13.7022C14.4509 13.6022 14.5071 13.4667 14.5072 13.3253V11.1919ZM5.97401 11.1919C5.97397 11.0504 5.91776 10.9148 5.81774 10.8148C5.71772 10.7147 5.58208 10.6585 5.44063 10.6585H3.30724C3.16581 10.6586 3.03021 10.7148 2.93023 10.8148C2.83025 10.9148 2.77406 11.0504 2.77401 11.1919V13.3253C2.7741 13.4667 2.83031 13.6022 2.93029 13.7022C3.03027 13.8022 3.16584 13.8584 3.30724 13.8585H5.44063C5.58205 13.8584 5.71766 13.8022 5.81768 13.7023C5.9177 13.6023 5.97393 13.4667 5.97401 13.3253V11.1919ZM10.2406 6.92526C10.2406 6.78381 10.1844 6.64816 10.0843 6.54814C9.98433 6.44812 9.84869 6.39191 9.70724 6.39187H7.57401C7.43256 6.39191 7.29692 6.44812 7.1969 6.54814C7.09688 6.64816 7.04067 6.78381 7.04063 6.92526V9.05848C7.04067 9.19993 7.09688 9.33557 7.1969 9.43559C7.29692 9.53561 7.43256 9.59182 7.57401 9.59187H9.70724C9.84869 9.59182 9.98433 9.53561 10.0843 9.43559C10.1844 9.33557 10.2406 9.19993 10.2406 9.05848V6.92526ZM14.5072 6.92526C14.5072 6.78384 14.451 6.64822 14.351 6.5482C14.251 6.44819 14.1154 6.39196 13.974 6.39187H11.8406C11.6992 6.39191 11.5635 6.44812 11.4635 6.54814C11.3635 6.64816 11.3073 6.78381 11.3072 6.92526V9.05848C11.3073 9.19993 11.3635 9.33557 11.4635 9.43559C11.5635 9.53561 11.6992 9.59182 11.8406 9.59187H13.974C14.1154 9.59178 14.251 9.53555 14.351 9.43553C14.451 9.33552 14.5072 9.1999 14.5072 9.05848V6.92526ZM5.97401 6.92526C5.97397 6.78381 5.91776 6.64816 5.81774 6.54814C5.71772 6.44812 5.58208 6.39191 5.44063 6.39187H3.30724C3.16581 6.39196 3.03021 6.44819 2.93023 6.5482C2.83025 6.64822 2.77406 6.78384 2.77401 6.92526V9.05848C2.77406 9.1999 2.83025 9.33552 2.93023 9.43553C3.03021 9.53555 3.16581 9.59178 3.30724 9.59187H5.44063C5.58208 9.59182 5.71772 9.53561 5.81774 9.43559C5.91776 9.33557 5.97397 9.19993 5.97401 9.05848V6.92526Z" fill="#424242"/>
									</svg>
								<span class="sv-blog-meta-title date"><?php echo esc_html($published_date); ?></span>
							</div>
						</div>
						<?php $trimmed_post_content = wp_trim_words($post_content, 20, '...'); ?>
						<p class="sv-blog-text"><?php echo esc_html($trimmed_post_content,'hello-elementor-child'); ?></p>
						<a href="<?php echo esc_url(get_the_permalink()); ?>" class="sv-blog-link"><?php esc_html_e('Read More','hello-elementor-child'); ?>
							<svg width="21" height="18" viewBox="0 0 21 18" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M20.0183 7.7734L12.5955 0.350527C12.3955 0.157364 12.1276 0.0504805 11.8496 0.0528965C11.5715 0.0553126 11.3056 0.166835 11.1089 0.363444C10.9123 0.560052 10.8008 0.826016 10.7984 1.10405C10.796 1.38209 10.9029 1.64995 11.096 1.84995L16.7088 7.4627H1.06041C0.779172 7.4627 0.509452 7.57442 0.310587 7.77328C0.111721 7.97215 0 8.24187 0 8.52311C0 8.80435 0.111721 9.07406 0.310587 9.27293C0.509452 9.4718 0.779172 9.58352 1.06041 9.58352H16.7088L11.096 15.1963C10.9948 15.2941 10.914 15.4111 10.8584 15.5405C10.8028 15.6698 10.7736 15.809 10.7723 15.9498C10.7711 16.0906 10.7979 16.2302 10.8513 16.3605C10.9046 16.4909 10.9833 16.6093 11.0829 16.7088C11.1825 16.8084 11.3009 16.8871 11.4312 16.9405C11.5615 16.9938 11.7011 17.0206 11.8419 17.0194C11.9827 17.0182 12.1219 16.9889 12.2512 16.9333C12.3806 16.8778 12.4976 16.797 12.5955 16.6957L20.0183 9.27282C20.2171 9.07396 20.3288 8.80429 20.3288 8.52311C20.3288 8.24192 20.2171 7.97225 20.0183 7.7734Z" fill="white"></path>
							</svg>
						</a>
					</div>
					<div class="blog-view-count">
						<div class="blog-view-count-box">
							<svg width="25" height="14" viewBox="0 0 25 14" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M12.5009 0C8.01365 0 3.94433 2.45504 0.941581 6.44269C0.696556 6.76939 0.696556 7.22581 0.941581 7.55251C3.94433 11.545 8.01365 14 12.5009 14C16.9883 14 21.0576 11.545 24.0603 7.55731C24.3053 7.23061 24.3053 6.77419 24.0603 6.4475C21.0576 2.45505 16.9883 0 12.5009 0ZM12.8228 11.9293C9.84412 12.1167 7.38427 9.66163 7.57164 6.67811C7.72538 4.21826 9.71921 2.22443 12.1791 2.07069C15.1578 1.88332 17.6176 4.33837 17.4303 7.32189C17.2717 9.77694 15.2779 11.7708 12.8228 11.9293ZM12.6739 9.65202C11.0692 9.75292 9.74323 8.43171 9.84893 6.82704C9.9306 5.50103 11.0068 4.42965 12.3328 4.34317C13.9375 4.24228 15.2635 5.56349 15.1578 7.16815C15.0713 8.49897 13.9951 9.57035 12.6739 9.65202Z" fill="white"/>
							</svg>
							<?php echo esc_html($view_count); ?>
						</div>
						<div class="blog-view-count-box">
							<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path fill-rule="evenodd" clip-rule="evenodd" d="M12.6 0.466675H1.4C0.6412 0.466675 0 1.10787 0 1.86667V9.56668C0 10.3255 0.6412 10.9667 1.4 10.9667H3.26667V13.3C3.26665 13.3471 3.28088 13.3931 3.30749 13.432C3.3341 13.4708 3.37185 13.5007 3.41577 13.5177C3.45972 13.5346 3.50775 13.5379 3.55359 13.5271C3.59942 13.5162 3.64092 13.4918 3.67267 13.457L5.93647 10.9667H12.6C13.3588 10.9667 14 10.3255 14 9.56668V1.86667C14 1.10787 13.3588 0.466675 12.6 0.466675ZM2.53906 3.51804C2.26292 3.51804 2.03906 3.74189 2.03906 4.01804C2.03906 4.29418 2.26292 4.51804 2.53906 4.51804H11.3789C11.655 4.51804 11.8789 4.29418 11.8789 4.01804C11.8789 3.74189 11.655 3.51804 11.3789 3.51804H2.53906ZM2.53906 6.48938C2.26292 6.48938 2.03906 6.71324 2.03906 6.98938C2.03906 7.26552 2.26292 7.48938 2.53906 7.48938H8.08203C8.35817 7.48938 8.58203 7.26552 8.58203 6.98938C8.58203 6.71324 8.35817 6.48938 8.08203 6.48938H2.53906Z" fill="white"/>
							</svg>
							<?php echo esc_html($comment_count); ?>
						</div>
					</div>
				</div>
				<?php
			}
			echo '</div>';
			$pager = 999999999;
			$pagination = paginate_links( array(
				'base' => str_replace( $pager, '%#%', esc_url( get_pagenum_link( $pager ) ) ),
				'format' => '?paged=%#%',
				'current' => max( 1, get_query_var('paged') ),
				'total' => $the_query->max_num_pages,
				'type' => 'array',
				'prev_text' => '&laquo;',
				'next_text' => '&raquo;',
			) );
			if ( is_array( $pagination ) ) {
				echo '<nav class="sv-blog-pagination"><ul class="sv-blog-page-numbers-list">';
				foreach ( $pagination as $page_num ) {
					?>
					<li class="sv-blog-page-numbers"><?php echo wp_kses_post($page_num); ?> </li>
					<?php
				}
				echo '</ul></nav>';
			}
		} else {
			echo '<p>No posts found.</p>';
		}
		wp_reset_postdata();
	?>
	</div>
</div>
<?php