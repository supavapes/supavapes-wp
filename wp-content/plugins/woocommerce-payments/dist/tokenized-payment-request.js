(()=>{var t={4036:()=>{jQuery((t=>{t("input[name=wc_deposit_option],input[name=wc_deposit_payment_plan]").on("change",(()=>{t("form").has("input[name=wc_deposit_option],input[name=wc_deposit_payment_plan]").trigger("woocommerce_variation_has_changed")}))}))}},e={};function a(r){var n=e[r];if(void 0!==n)return n.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,a),o.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),a.p=window.wcpayAssets.url,(()=>{"use strict";const t=window.wp.hooks,e=t=>"undefined"!=typeof wcpayConfig?wcpayConfig[t]:r(t),r=t=>{let e=null;if("undefined"!=typeof wcpay_upe_config)e=wcpay_upe_config;else{if("object"!=typeof wc||void 0===wc.wcSettings)return null;e=wc.wcSettings.getSetting("woocommerce_payments_data")||{}}return e[t]||null},n=t=>"object"==typeof wcpayExpressCheckoutParams&&wcpayExpressCheckoutParams.hasOwnProperty(t)?wcpayExpressCheckoutParams[t]:"object"==typeof wcpayPaymentRequestParams&&wcpayPaymentRequestParams.hasOwnProperty(t)?wcpayPaymentRequestParams[t]:null,o=t=>n("wc_ajax_url").toString().replace("%%endpoint%%","wcpay_"+t),i=t=>n(t),s=t=>o(t),c=function(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"wcpay_";return t.toString().replace("%%endpoint%%",a+e)};class p{constructor(t,e){this.options=t,this.stripe=null,this.stripePlatform=null,this.request=e,this.isWooPayRequesting=!1}createStripe(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const n={locale:e};return a&&(n.stripeAccount=a),r&&(n.betas=r),new Stripe(t,n)}getStripeForUPE(t){return this.options.forceNetworkSavedCards=r("paymentMethodsConfig")[t].forceNetworkSavedCards,this.getStripe()}getStripe(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{publishableKey:e,accountId:a,forceNetworkSavedCards:r,locale:n,isStripeLinkEnabled:o}=this.options;if(r&&!t)return this.stripePlatform||(this.stripePlatform=this.createStripe(e,n)),this.stripePlatform;if(!this.stripe){let t=["card_country_event_beta_1"];o&&(t=t.concat(["link_autofill_modal_beta_1"])),this.stripe=this.createStripe(e,n,a,t)}return this.stripe}loadStripe(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((e=>{try{e(this.getStripe(t))}catch(t){e({error:t})}}))}confirmIntent(t,a){const r=t.match(/#wcpay-confirm-(pi|si):(.+):(.+):(.+)$/);if(!r)return!0;const n="si"===r[1];let o=r[2];const s=r[3],c=r[4],p=t.indexOf("order-pay"),u=p>-1&&t.substring(p).match(/\d+/);return u&&(o=u[0]),(()=>{const{locale:t,publishableKey:a}=this.options,r=e("accountIdForIntentConfirmation");return n?this.getStripe().handleNextAction({clientSecret:s}):r?this.createStripe(a,t,r).confirmCardPayment(s):this.getStripe(!0).handleNextAction({clientSecret:s})})().then((t=>{var r;const n=t.paymentIntent&&t.paymentIntent.id||t.setupIntent&&t.setupIntent.id||t.error&&t.error.payment_intent&&t.error.payment_intent.id||t.error.setup_intent&&t.error.setup_intent.id,s=null!==(r=i("ajax_url"))&&void 0!==r?r:e("ajaxUrl");return[this.request(s,{action:"update_order_status",order_id:o,_ajax_nonce:c,intent_id:n,payment_method_id:a||null}),t.error]})).then((t=>{let[e,a]=t;if(a)throw a;return e.then((t=>{const e="string"==typeof t?JSON.parse(t):t;if(e.error)throw e.error;return e.return_url}))}))}setupIntent(t){return this.request(e("ajaxUrl"),{action:"create_setup_intent","wcpay-payment-method":t,_ajax_nonce:e("createSetupIntentNonce")}).then((t=>{if(!t.success)throw t.data.error;return"succeeded"===t.data.status?t.data:this.getStripe().confirmCardSetup(t.data.client_secret).then((t=>{const{setupIntent:e,error:a}=t;if(a)throw a;return e}))}))}saveUPEAppearance(t,a){return this.request(e("ajaxUrl"),{elements_location:a,appearance:JSON.stringify(t),action:"save_upe_appearance",_ajax_nonce:e("saveUPEAppearanceNonce")}).then((t=>t.data)).catch((t=>{throw t.message?t:new Error(t.statusText)}))}paymentRequestCalculateShippingOptions(t){return this.request(s("get_shipping_options"),{security:i("nonce")?.shipping,is_product_page:i("is_product_page"),...t})}paymentRequestUpdateShippingDetails(t){return this.request(s("update_shipping_method"),{security:i("nonce")?.update_shipping,shipping_method:[t.id],is_product_page:i("is_product_page")})}paymentRequestGetCartDetails(){return this.request(s("get_cart_details"),{security:i("nonce")?.get_cart_details})}paymentRequestAddToCart(t){return this.request(s("add_to_cart"),{security:i("nonce")?.add_to_cart,...t})}paymentRequestEmptyCart(t){return this.request(s("empty_cart"),{security:i("nonce")?.empty_cart,booking_id:t})}paymentRequestGetSelectedProductData(t){return this.request(s("get_selected_product_data"),{security:i("nonce")?.get_selected_product_data,...t})}paymentRequestCreateOrder(t){return this.request(s("create_order"),{_wpnonce:i("nonce")?.checkout,...t})}expressCheckoutECECalculateShippingOptions(t){return this.request(o("get_shipping_options"),{security:n("nonce")?.shipping,is_product_page:n("is_product_page"),...t})}expressCheckoutECECreateOrder(t){return this.request(o("create_order"),{_wpnonce:n("nonce")?.checkout,...t})}expressCheckoutECEPayForOrder(t,e){return this.request(o("pay_for_order"),{_wpnonce:n("nonce")?.pay_for_order,order:t,...e})}initWooPay(t,a){if(!this.isWooPayRequesting){this.isWooPayRequesting=!0;const r=e("wcAjaxUrl"),n=e("initWooPayNonce");return this.request(c(r,"init_woopay"),{_wpnonce:n,email:t,user_session:a,order_id:e("order_id"),key:e("key"),billing_email:e("billing_email")}).finally((()=>{this.isWooPayRequesting=!1}))}}expressCheckoutAddToCart(t){const a=e("wcAjaxUrl"),r=e("addToCartNonce");return this.request(c(a,"add_to_cart"),{security:r,...t})}paymentRequestPayForOrder(t,e){return this.request(s("pay_for_order"),{_wpnonce:i("nonce")?.pay_for_order,order:t,...e})}pmmeGetCartData(){return fetch(`${r("storeApiURL")}/cart`,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}))}}const u=window.wp.apiFetch;var l=a.n(u);const d=window.wp.url,y=window.wp.i18n,m=(t,e)=>{var a;return t*10**((null!==(a=w("checkout")?.currency_decimals)&&void 0!==a?a:2)-e.currency_minor_unit)},h=t=>{const e=t.items.map((t=>({amount:m(parseInt(t.prices.price,10),t.prices),label:[t.name,t.quantity>1&&`(x${t.quantity})`,t.variation&&t.variation.map((t=>`${t.attribute}: ${t.value}`)).join(", ")].filter(Boolean).join(" ")}))),a=parseInt(t.totals.total_tax||"0",10);a&&e.push({amount:m(a,t.totals),label:(0,y.__)("Tax","woocommerce-payments")});const r=parseInt(t.totals.total_shipping||"0",10);r&&e.push({amount:m(r,t.totals),label:(0,y.__)("Shipping","woocommerce-payments")});const n=parseInt(t.totals.total_refund||"0",10);return n&&e.push({amount:-m(n,t.totals),label:(0,y.__)("Refund","woocommerce-payments")}),e},_=t=>t.shipping_rates[0].shipping_rates.map((t=>({id:t.rate_id,label:t.name,amount:m(parseInt(t.price,10),t),detail:""}))),w=t=>"object"==typeof wcpayPaymentRequestParams&&wcpayPaymentRequestParams.hasOwnProperty(t)?wcpayPaymentRequestParams[t]:null;class g{cartRequestHeaders={};async _request(t){return await l()({...t,path:(0,d.addQueryArgs)(t.path,{currency:w("checkout").currency_code.toUpperCase()}),headers:{...this.cartRequestHeaders,...t.headers}})}async placeOrder(t){return await this._request({method:"POST",path:"/wc/store/v1/checkout",credentials:"product"===w("button_context")?"omit":void 0,headers:{"X-WooPayments-Express-Payment-Request":!0,"X-WooPayments-Express-Payment-Request-Nonce":w("nonce").tokenized_cart_nonce||void 0,...this.cartRequestHeaders},data:t})}async getCart(){const t=await this._request({method:"GET",path:"/wc/store/v1/cart",parse:!1});return this.cartRequestHeaders={Nonce:t.headers.get("Nonce")},t.json()}async createAnonymousCart(){const t=await this._request({method:"GET",path:"/wc/store/v1/cart",credentials:"omit",parse:!1});this.cartRequestHeaders={Nonce:t.headers.get("Nonce"),"X-WooPayments-Store-Api-Nonce":t.headers.get("Nonce"),"Cart-Token":t.headers.get("Cart-Token"),"X-WooPayments-Express-Payment-Request-Nonce":t.headers.get("X-WooPayments-Express-Payment-Request-Nonce")}}async updateCustomer(t){return await this._request({method:"POST",path:"/wc/store/v1/cart/update-customer",credentials:"product"===w("button_context")?"omit":void 0,headers:{"X-WooPayments-Express-Payment-Request":!0,"X-WooPayments-Express-Payment-Request-Nonce":w("nonce").tokenized_cart_nonce||void 0,...this.cartRequestHeaders},data:t})}async selectShippingRate(t){return await this._request({method:"POST",path:"/wc/store/v1/cart/select-shipping-rate",credentials:"product"===w("button_context")?"omit":void 0,data:t})}async addProductToCart(){const e={id:jQuery(".single_add_to_cart_button").val(),quantity:parseInt(jQuery(".quantity .qty").val(),10)||1,variation:[]};return await this._request({method:"POST",path:"/wc/store/v1/cart/add-item",credentials:"omit",data:(0,t.applyFilters)("wcpay.payment-request.cart-add-item",e)})}async emptyCart(){try{const t=(await this._request({method:"GET",path:"/wc/store/v1/cart",credentials:"omit"})).items.map((t=>this._request({method:"POST",path:"/wc/store/v1/cart/remove-item",credentials:"omit",data:{key:t.key}})));await Promise.all(t)}catch(t){}}}class v{orderId;key;billingEmail="";cachedCartData={};constructor(t){let{orderId:e,key:a,billingEmail:r=""}=t;this.orderId=e,this.key=a,this.billingEmail=r}async placeOrder(t){return await l()({method:"POST",path:`/wc/store/v1/checkout/${this.orderId}`,headers:{Nonce:w("nonce").tokenized_order_nonce},data:{...t,key:this.key,billing_email:this.billingEmail,billing_address:this.cachedCartData.billing_address,shipping_address:this.cachedCartData.shipping_address}})}async getCart(){return this.cachedCartData=await l()({method:"GET",path:(0,d.addQueryArgs)(`/wc/store/v1/order/${this.orderId}`,{key:this.key,billing_email:this.billingEmail})})}}const b=window.lodash;window.wp.domReady;const f=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,n,o;const s=null!==(r=e("platformTrackerNonce"))&&void 0!==r?r:null===(n=i("nonce"))||void 0===n?void 0:n.platform_tracker,c=null!==(o=e("ajaxUrl"))&&void 0!==o?o:i("ajax_url"),p=new FormData;p.append("tracksNonce",s),p.append("action","platform_tracks"),p.append("tracksEventName",t),p.append("tracksEventProp",JSON.stringify(a)),fetch(c,{method:"post",body:p})};let q;const P=t=>{const e={google_pay:"gpay_button_click",apple_pay:"applepay_button_click"}[q];e&&f(e,{source:t})},C=(0,b.debounce)((t=>{const e={google_pay:"gpay_button_load",apple_pay:"applepay_button_load"}[q];e&&f(e,{source:t})}),1e3),k=t=>{var e,a,r,n,o,i,s,c,p;return{shipping_address:{first_name:null!==(e=t.recipient?.split(" ")?.slice(0,1)?.join(" "))&&void 0!==e?e:"",last_name:null!==(a=t.recipient?.split(" ")?.slice(1)?.join(" "))&&void 0!==a?a:"",company:null!==(r=t.organization)&&void 0!==r?r:"",address_1:null!==(n=t.addressLine?.[0])&&void 0!==n?n:"",address_2:null!==(o=t.addressLine?.[1])&&void 0!==o?o:"",city:null!==(i=t.city)&&void 0!==i?i:"",state:null!==(s=t.region)&&void 0!==s?s:"",country:null!==(c=t.country)&&void 0!==c?c:"",postcode:null!==(p=t.postalCode?.replace(" ",""))&&void 0!==p?p:""}}},x=t=>{var e,a,r,n,o,i,s,c,p,u,l,d,y,m,h,_;const w=(null!==(e=t.paymentMethod?.billing_details?.name)&&void 0!==e?e:t.payerName)||"",g=null!==(a=t.paymentMethod?.billing_details?.address)&&void 0!==a?a:{},v=null!==(r=t.shippingAddress)&&void 0!==r?r:{},b="applePay"===t.walletName?"apple_pay":"google_pay",f=null!==(n=null!==(o=t.paymentMethod?.billing_details?.phone)&&void 0!==o?o:t.payerPhone?.replace("/[() -]/g",""))&&void 0!==n?n:"";return{customer_note:t.order_comments,billing_address:{first_name:null!==(i=w.split(" ")?.slice(0,1)?.join(" "))&&void 0!==i?i:"",last_name:w.split(" ")?.slice(1)?.join(" ")||"-",company:null!==(s=g.organization)&&void 0!==s?s:"",address_1:null!==(c=g.line1)&&void 0!==c?c:"",address_2:null!==(p=g.line2)&&void 0!==p?p:"",city:null!==(u=g.city)&&void 0!==u?u:"",state:null!==(l=g.state)&&void 0!==l?l:"",postcode:null!==(d=g.postal_code)&&void 0!==d?d:"",country:null!==(y=g.country)&&void 0!==y?y:"",email:null!==(m=null!==(h=t.paymentMethod?.billing_details?.email)&&void 0!==h?h:t.payerEmail)&&void 0!==m?m:"",phone:f},shipping_address:{...k(v).shipping_address,phone:f},payment_method:"woocommerce_payments",payment_data:[{key:"payment_method",value:"card"},{key:"payment_request_type",value:b},{key:"wcpay-fraud-prevention-token",value:null!==(_=window.wcpayFraudPreventionToken)&&void 0!==_?_:""},{key:"wcpay-payment-method",value:t.paymentMethod?.id}]}};let R=null;const S={init:t=>{let{$container:e}=t;R=e},getElements:()=>jQuery(".wcpay-payment-request-wrapper,#wcpay-payment-request-button-separator"),blockButton:()=>{R.data("blockUI.isBlocked")||R.block({message:null})},unblockButton:()=>{S.show(),R.unblock()},showButton:t=>{R.length&&(S.show(),t.mount("#wcpay-payment-request-button"))},hide:()=>{S.getElements().hide()},show:()=>{S.getElements().show()}},j=S,I=()=>null;class A{isPaymentAborted=!1;areListenersInitialized=!1;cachedCartData=void 0;paymentRequestCartApi=void 0;wcpayApi=void 0;initialProductData=void 0;constructor(t){let{wcpayApi:e,paymentRequestCartApi:a,productData:r}=t;this.wcpayApi=e,this.paymentRequestCartApi=a,this.initialProductData=r}async startPaymentRequest(){const e=this,a=(t=>{let{stripe:e,cartData:a,productData:r}=t,n=w("checkout")?.country_code;return"PR"===n&&(n="US"),e.paymentRequest({country:n,requestPayerName:!0,requestPayerEmail:!0,requestPayerPhone:w("checkout")?.needs_payer_phone,...r?{currency:r.currency,total:r.total,displayItems:r.displayItems,requestShipping:r.needs_shipping}:{currency:a.totals.currency_code.toLowerCase(),total:{label:w("total_label"),amount:m(parseInt(a.totals.total_price,10)-parseInt(a.totals.total_refund||0,10),a.totals)},requestShipping:"pay_for_order"!==w("button_context")&&a.needs_shipping,displayItems:h(a)}})})({stripe:this.wcpayApi.getStripe(),cartData:this.cachedCartData,productData:this.initialProductData}),r=await a.canMakePayment();if(!r)return void(0,t.doAction)("wcpay.payment-request.availability",{paymentRequestType:null});const n=r.applePay?"apple_pay":"google_pay";(0,t.doAction)("wcpay.payment-request.availability",{paymentRequestType:n}),q=n,C(w("button_context")),"product"===w("button_context")&&await this.paymentRequestCartApi.createAnonymousCart();const o=this.wcpayApi.getStripe().elements().create("paymentRequestButton",{paymentRequest:a,style:{paymentRequestButton:{type:w("button").type,theme:w("button").theme,height:w("button").height+"px"}}});if(j.showButton(o),"pay_for_order"===w("button_context")&&o.on("click",(()=>{P("pay_for_order")})),"product"===w("button_context")&&this.attachPaymentRequestButtonEventListeners(),(0,t.removeFilter)("wcpay.payment-request.update-button-data","automattic/wcpay/payment-request"),(0,t.addFilter)("wcpay.payment-request.update-button-data","automattic/wcpay/payment-request",(async t=>{await t;const r=await e.getCartData(),n=e.initialProductData?.needs_shipping||e.cachedCartData?.needs_shipping;e.cachedCartData=r,e.isPaymentAborted||n!==r.needs_shipping?await e.init():a.update({total:{label:w("total_label"),amount:m(parseInt(r.totals.total_price,10)-parseInt(r.totals.total_refund||0,10),r.totals)},displayItems:h(r)})})),"product"===w("button_context")){const t=jQuery(".single_add_to_cart_button");o.on("click",(a=>(P("product"),w("login_confirmation")?(a.preventDefault(),void(t=>{if(!w("login_confirmation"))return;let e=w("login_confirmation")?.message;e=e.replace(/\*\*.*?\*\*/,"apple_pay"===t?"Apple Pay":"Google Pay"),e=e.replace(/\*\*/g,""),confirm(e)&&(window.location.href=w("login_confirmation")?.redirect_url)})(n)):t.is(".disabled")?(a.preventDefault(),void(t.is(".wc-variation-is-unavailable")?window.alert(window.wc_add_to_cart_variation_params?.i18n_unavailable_text||(0,y.__)("Sorry, this product is unavailable. Please choose a different combination.","woocommerce-payments")):window.alert(window?.wc_add_to_cart_variation_params?.i18n_make_a_selection_text||(0,y.__)("Please select some product options before adding this product to your cart.","woocommerce-payments")))):void e.paymentRequestCartApi.addProductToCart())))}a.on("cancel",(()=>{e.isPaymentAborted=!0,"product"===w("button_context")&&e.paymentRequestCartApi.emptyCart()})),a.on("shippingaddresschange",(async t=>{try{const a=await e.paymentRequestCartApi.updateCustomer(k(t.shippingAddress));t.updateWith({status:"success",shippingOptions:_(a),total:{label:w("total_label"),amount:m(parseInt(a.totals.total_price,10)-parseInt(a.totals.total_refund||0,10),a.totals)},displayItems:h(a)}),e.cachedCartData=a}catch(e){t.updateWith({status:"fail"})}})),a.on("shippingoptionchange",(async t=>{try{const a=await e.paymentRequestCartApi.selectShippingRate({package_id:0,rate_id:t.shippingOption.id});t.updateWith({status:"success",total:{label:w("total_label"),amount:m(parseInt(a.totals.total_price,10)-parseInt(a.totals.total_refund||0,10),a.totals)},displayItems:h(a)}),e.cachedCartData=a}catch(e){t.updateWith({status:"fail"})}})),a.on("paymentmethod",(async a=>{try{const r=await e.paymentRequestCartApi.placeOrder({...x(a),extensions:(0,t.applyFilters)("wcpay.payment-request.cart-place-order-extension-data",{})}),n=e.wcpayApi.confirmIntent(r.payment_result.redirect_url);a.complete("success");let o="";o=!0===n?r.payment_result.redirect_url:await n,jQuery.blockUI({message:null,overlayCSS:{background:"#fff",opacity:.6}}),window.location=o}catch(t){a.complete("fail"),jQuery(".woocommerce-error").remove();const e=jQuery(".woocommerce-notices-wrapper").first();e.length&&(e.append(jQuery('<div class="woocommerce-error" />').text(t.message)),jQuery("html, body").animate({scrollTop:e.find(".woocommerce-error").offset().top},600))}}))}attachPaymentRequestButtonEventListeners(){if(this.areListenersInitialized)return;this.areListenersInitialized=!0;const e=jQuery(".quantity");e.on("input",".qty",(()=>{j.blockButton()})),e.on("input",".qty",function(t,e){let a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){const n=this,o=arguments,i=r&&!a;clearTimeout(a),a=setTimeout((()=>{a=null,r||e.apply(n,o)}),t),i&&e.apply(n,o)}}(250,(async()=>{await(0,t.applyFilters)("wcpay.payment-request.update-button-data",Promise.resolve()),j.unblockButton()})))}async getCartData(){if("product"!==w("button_context"))return await this.paymentRequestCartApi.getCart();const t=new g;await t.createAnonymousCart();const e=await t.addProductToCart();return t.emptyCart().finally(I),e}async init(){if(!this.cachedCartData)try{this.cachedCartData=await this.getCartData()}catch(t){}this.cachedCartData&&(this.initialProductData=void 0),await this.startPaymentRequest(),this.isPaymentAborted=!1}}a(4036),(0,t.addFilter)("wcpay.payment-request.cart-place-order-extension-data","automattic/wcpay/payment-request",(t=>{const e=jQuery("#wcpay-express-checkout__order-attribution-inputs input");if(!e.length)return t;const a={};return e.each((function(){const t=jQuery(this).attr("name").replace("wc_order_attribution_",""),e=jQuery(this).val();t&&e&&(a[t]=e)})),{...t,"woocommerce/order-attribution":a}})),jQuery((e=>{e(document.body).on("woocommerce_variation_has_changed",(async()=>{try{j.blockButton(),await(0,t.applyFilters)("wcpay.payment-request.update-button-data",Promise.resolve()),j.unblockButton()}catch(t){j.hide()}}))})),(0,t.addFilter)("wcpay.payment-request.cart-add-item","automattic/wcpay/payment-request",(t=>{const e=jQuery(".single_variation_wrap");if(!e.length)return t;const a=e.find('input[name="product_id"]').val();return{...t,id:parseInt(a,10)}})),(0,t.addFilter)("wcpay.payment-request.cart-add-item","automattic/wcpay/payment-request",(t=>{const e=jQuery(".variations_form");if(!e.length)return t;const a=[];return e.find(".variations select").each((function(){const t=jQuery(this),e=t.data("attribute_name")||t.attr("name");a.push({attribute:document.querySelector(`label[for="${e.replace("attribute_","")}"]`).innerHTML,value:t.val()||""})})),{...t,variation:[...t.variation,...a]}})),jQuery((e=>{if(w("has_block")&&"pay_for_order"!==w("button_context"))return;const a=w("stripe").publishableKey;if(!a)return;j.init({$container:e("#wcpay-payment-request-button")});const n=new p({publishableKey:a,accountId:w("stripe").accountId,locale:w("stripe").locale},((t,a)=>new Promise(((r,n)=>{e.post(t,a).then(r).fail(n)}))));let o=new g;"pay_for_order"===w("button_context")&&(o=new v({orderId:r("order_id"),key:r("key"),billingEmail:r("billing_email")}));const i=new A({wcpayApi:n,paymentRequestCartApi:o,productData:w("product")||void 0});i.init(),e(document.body).on("updated_cart_totals",(async()=>{await(0,t.applyFilters)("wcpay.payment-request.update-button-data",Promise.resolve()),i.init()})),e(document.body).on("updated_checkout",(async()=>{await(0,t.applyFilters)("wcpay.payment-request.update-button-data",Promise.resolve())}))}))})()})();